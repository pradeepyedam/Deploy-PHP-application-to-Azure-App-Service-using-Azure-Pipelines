# Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines
Overview

Azure Pipelines helps you set up a highly customizable continuous integration (CI) and continuous delivery (CD) pipeline to target app services, virtual machines, or containers in Azure whether you are developing a .NET, Java, Node, PHP, or a Python app.

In this lab, you will configure Azure Pipelines for a PHP app to deploy on to an Azure Web App.

Objectives

Upon completion of this lab, you will be able to:

Set up a PHP Azure DevOps Project with Azure DevOps Demo Generator
Set up an Azure CI Pipeline
Set up an Azure Web App within the Release pipeline and deploy the PHP Application to the Azure Web App

Before you begin

Refer Getting Started before you follow the lab exercises.

Exercise 1: Create a PHP application project using the Azure DevOps Demo Generator
In this practice lab, you are going to work on a PHP project. The purpose is to create a system for the developer to understand the list of tasks that are triggered once the code is pushed to a shared repository.

While the code is a simple PHP application, you will use Azure Command Line Interface(CLI) to provision the infrastructure to deploy the build artifacts.

  1.Use the Azure DevOps Demo Generator{:target="_blank"} to provision project on your Azure DevOps Organization. This URL will automatically select the PHP template in the demo generator.

To create Azure Devops Demo Generator to sign in

<img width="958" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/757c7859-bf08-496d-810c-c91b22c76924">

To create on New Project then Seletcted Template,New Project Name and Selected Organization then project is successfully provisioned.

![image](https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/0f9beb07-ba10-4365-a00a-9d68fdf64fbf)

To Click on Navigate Project then open PHPlab

<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/6469cd17-2a7d-4e9b-ad03-a6b59710aad8">



Exercise 2: Commit code changes which triggers a CI build

The Azure DevOps Demo Generator creates a Git repository with code in your Azure DevOps Organization. You are going to update the code and commit changes.

1.Navigate to Repos tab in the Azure DevOps portal and navigate to the below path to edit the file.

php/config.php


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/765e3150-3b05-42dc-a698-7b598c080bfc">

2.Scroll down to line number 11, select Edit , modify PHP to DevOps for PHP using Azure DevOps and choose Commit to save the changes to the code.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/0a07e407-fce3-469c-b897-e73a42832861">


3.Go to Pipelines. You should now see in progress. The changes you just made are automatically built which will be deployed via the Release pipeline. Click the ellipsis to View Pipelines results.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/c39603c0-29df-4ce4-a3d1-d6bf005c7b9b">


<img width="960" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/0d214c1b-bcce-4277-a702-52425909f1b6">


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/5035f42c-2234-45f3-aee4-9efee8c1133a">


Exercise 3: Configure the Release Definition
Once the build is complete, let us configure the CD pipeline. You will notice a release definition by navigating to Releases under the Pipelines section. The release will provision an Azure Web app using the Azure CLI and deploy the zip file to the Web App generated by the associated build.

1.Under the Releases under Pipelines tab, select release definition PHP and click on Edit.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/934fcb94-b452-4eb9-8188-4c748a1bc5c2">


Go to Tasks and select Dev environment.


<img width="960" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/3bfafe33-dfb7-4636-a4e5-959d67db133e">


3.Select the Azure CLI task, choose the Azure subscription. There are 2 ways of choosing the Azure subscription.

  If your subscription is not listed or if you want to use an existing service principal, click the Manage link.

    1.Click on the +New Service Connection button and select the Azure Resource Manager option. Provide Connection name, select the Azure Subscription from the list and then click on the Ok button. The Azure credentials will be required to authorize the connection.


![image](https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/7f9b89bc-21ff-42ed-b3d0-63a8450910ee)


  If the subscription is already listed, select the Azure subscription from the list and click Authorize.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/d10ec022-3f13-4792-a7a9-4fe2c8b6ecaf">

4.Azure CLI is used in the inline script to create the following in Azure -

  1.Resource Group
  2.App Service Plan
  3.App Service


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/0e5f5ba6-af5a-45e2-97b7-189c26aa3210">


5.The variables are defined in the Variables section.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/3a40c518-6c5b-4ff5-999f-16eadf3c7444">


6.Select the Azure App Service Deploy task and pick Azure subscription from the dropdown list, then click on Save.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/3fbf2e5f-84a7-41f2-8394-d9be3aff6ab3">


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/40bd229d-8564-44c2-9fe6-f153d2b51a26">


7.Queue the saved release definition to deploy the latest build artifacts to the Azure Web App.


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/05fedffa-73bf-4781-9da2-9ae6d02aa2f6">


<img width="564" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/543083f0-dfec-4276-98e8-208b2e25c87b">


<img width="959" alt="image" src="https://github.com/pradeepyedam/Deploy-PHP-application-to-Azure-App-Service-using-Azure-Pipelines/assets/134625420/277bc0fd-95c5-4706-a026-413cba5405ce">

